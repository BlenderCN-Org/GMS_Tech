//optimize uniforms with textures

//local - extract normal and then proceed
vec3 local = mod(in_Position, 100.0)*100.0;
normal = (in_Position - local)/100.0/128.0 - vec3(1.0);
local *= scale;

//rotate(local.xy, angle.z);
rotate(local.xz, angle.y);
rotate(local.yz, angle.x);

//local to relative
local += offset - camera_position;

rotate(local.xy, -camera_angle.z);

rotate(local.xz, -camera_angle.y);

rotate(local.yz, -camera_angle.x);
